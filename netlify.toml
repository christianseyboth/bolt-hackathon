[build]
command = "npm run build"
publish = ".next"

[[plugins]]
package = "@netlify/plugin-nextjs"

[build.environment]
NEXT_TELEMETRY_DISABLED = "1"
# These are public environment variables that should be ignored by secret scanning
SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_SUPABASE_ANON_KEY,NEXT_PUBLIC_SUPABASE_URL"

# Form processing
[[redirects]]
from = "/contact"
to = "/contact/index.html"
status = 200

# API routes
[[redirects]]
from = "/api/*"
to = "/.netlify/functions/___netlify-handler"
status = 200

# Catch-all for Next.js
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
